{"id":"model/gen.js","dependencies":[{"name":"/Users/zach/Code/brooklyn-js-tensorflow/.babelrc","includedInParent":true,"mtime":1574222996221},{"name":"/Users/zach/Code/brooklyn-js-tensorflow/package.json","includedInParent":true,"mtime":1574314359001},{"name":"fs","loc":{"line":22,"column":20},"parent":"/Users/zach/Code/brooklyn-js-tensorflow/model/gen.js","resolved":"/Users/zach/Code/brooklyn-js-tensorflow/node_modules/parcel-bundler/src/builtins/_empty.js"},{"name":"os","loc":{"line":23,"column":20},"parent":"/Users/zach/Code/brooklyn-js-tensorflow/model/gen.js","resolved":"/Users/zach/Code/brooklyn-js-tensorflow/node_modules/os-browserify/browser.js"},{"name":"path","loc":{"line":24,"column":22},"parent":"/Users/zach/Code/brooklyn-js-tensorflow/model/gen.js","resolved":"/Users/zach/Code/brooklyn-js-tensorflow/node_modules/path-browserify/index.js"},{"name":"argparse","loc":{"line":25,"column":26},"parent":"/Users/zach/Code/brooklyn-js-tensorflow/model/gen.js","resolved":"/Users/zach/Code/brooklyn-js-tensorflow/node_modules/argparse/index.js"},{"name":"@tensorflow/tfjs","loc":{"line":27,"column":20},"parent":"/Users/zach/Code/brooklyn-js-tensorflow/model/gen.js","resolved":"/Users/zach/Code/brooklyn-js-tensorflow/node_modules/@tensorflow/tfjs/dist/tf.esm.js"},{"name":"@tensorflow/tfjs-node","loc":{"line":85,"column":12},"parent":"/Users/zach/Code/brooklyn-js-tensorflow/model/gen.js","resolved":"/Users/zach/Code/brooklyn-js-tensorflow/node_modules/@tensorflow/tfjs-node/dist/index.js"},{"name":"./data","loc":{"line":30,"column":25},"parent":"/Users/zach/Code/brooklyn-js-tensorflow/model/gen.js","resolved":"/Users/zach/Code/brooklyn-js-tensorflow/model/data.js"},{"name":"./model","loc":{"line":31,"column":29},"parent":"/Users/zach/Code/brooklyn-js-tensorflow/model/gen.js","resolved":"/Users/zach/Code/brooklyn-js-tensorflow/model/model.js"}],"generated":{"js":"var __dirname = \"/Users/zach/Code/brooklyn-js-tensorflow/model\";\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.gen = gen;\n\nvar fs = _interopRequireWildcard(require(\"fs\"));\n\nvar os = _interopRequireWildcard(require(\"os\"));\n\nvar path = _interopRequireWildcard(require(\"path\"));\n\nvar argparse = _interopRequireWildcard(require(\"argparse\"));\n\nvar tf = _interopRequireWildcard(require(\"@tensorflow/tfjs\"));\n\nvar tfn = _interopRequireWildcard(require(\"@tensorflow/tfjs-node\"));\n\nvar _data = require(\"./data\");\n\nvar _model = require(\"./model\");\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\n/**\n * Use a trained next-character prediction model to generate some text.\n */\nconst handler = tfn.io.fileSystem(\"./model/brooklynjs/model.json\"); // function parseArgs() {\n//   const parser = argparse.ArgumentParser({\n//     description: 'Train an lstm-text-generation model.'\n//   });\n// //   parser.addArgument('textDatasetName', {\n// //     type: 'string',\n// //     choices: Object.keys(TEXT_DATA_URLS),\n// //     help: 'Name of the text dataset'\n// //   });\n//   parser.addArgument('modelJSONPath', {\n//     type: 'string',\n//     help: 'Path to the trained next-char prediction model saved on disk ' +\n//     '(e.g., ./my-model/model.json)'\n//   });\n//   parser.addArgument('--genLength', {\n//     type: 'int',\n//     defaultValue: 200,\n//     help: 'Length of the text to generate.'\n//   });\n//   parser.addArgument('--temperature', {\n//     type: 'float',\n//     defaultValue: 0.5,\n//     help: 'Temperature value to use for text generation. Higher values ' +\n//     'lead to more random-looking generation results.'\n//   });\n//   parser.addArgument('--gpu', {\n//     action: 'storeTrue',\n//     help: 'Use CUDA GPU for training.'\n//   });\n//   parser.addArgument('--sampleStep', {\n//     type: 'int',\n//     defaultValue: 3,\n//     help: 'Step length: how many characters to skip between one example ' +\n//     'extracted from the text data to the next.'\n//   });\n//   return parser.parseArgs();\n// }\n\nasync function gen() {\n  let result = '';\n\n  (async () => {\n    //   const args = parseArgs();\n    //   if (args.gpu) {\n    //     console.log('Using GPU');\n    //     require('@tensorflow/tfjs-node-gpu');\n    //   } else {\n    // console.log('Using CPU');\n    require('@tensorflow/tfjs-node'); //   }\n    // console.log('model:');\n    // Load the model.\n\n\n    const model = await tf.loadLayersModel(handler); // console.log(model);\n\n    const sampleLen = model.inputs[0].shape[1]; // Create the text data object.\n    //   const textDataURL = TEXT_DATA_URLS[args.textDatasetName].url;\n\n    const textDataURL = path.resolve(__dirname, '..', 'text', 'results', 'corpus.txt'); //   const localTextDataPath = path.join(os.tmpdir(), path.basename(textDataURL));\n    //   await maybeDownload(textDataURL, localTextDataPath);\n\n    const text = fs.readFileSync(textDataURL, {\n      encoding: 'utf-8'\n    });\n    const textData = new _data.TextData('text-data', text, sampleLen, 3); // Get a seed text from the text data object.\n\n    const [seed, seedIndices] = textData.getRandomSlice();\n    console.log('seed indices: ', seedIndices);\n    console.log('seed: ', seed); //   console.log(`Seed text:\\n\"${seed}\"\\n`);\n\n    const generated = await (0, _model.generateText)(model, textData, seedIndices, 600, 0.35);\n    console.log(generated);\n    return generated;\n  })();\n}\n\ngen();"},"sourceMaps":{"js":{"mappings":[{"generated":{"line":9,"column":0},"source":"model/gen.js","original":{"line":22,"column":0}},{"generated":{"line":11,"column":0},"source":"model/gen.js","original":{"line":23,"column":0}},{"generated":{"line":13,"column":0},"source":"model/gen.js","original":{"line":24,"column":0}},{"generated":{"line":15,"column":0},"source":"model/gen.js","original":{"line":25,"column":0}},{"generated":{"line":17,"column":0},"source":"model/gen.js","original":{"line":27,"column":0}},{"generated":{"line":19,"column":0},"source":"model/gen.js","original":{"line":28,"column":0}},{"generated":{"line":21,"column":0},"source":"model/gen.js","original":{"line":30,"column":0}},{"generated":{"line":23,"column":0},"source":"model/gen.js","original":{"line":31,"column":0}},{"generated":{"line":29,"column":0},"source":"model/gen.js","original":{"line":1,"column":0}},{"generated":{"line":46,"column":0},"source":"model/gen.js","original":{"line":18,"column":0}},{"generated":{"line":49,"column":0},"source":"model/gen.js","original":{"line":33,"column":0}},{"name":"handler","generated":{"line":49,"column":6},"source":"model/gen.js","original":{"line":33,"column":6}},{"generated":{"line":49,"column":13},"source":"model/gen.js","original":{"line":33,"column":13}},{"name":"tfn","generated":{"line":49,"column":16},"source":"model/gen.js","original":{"line":33,"column":16}},{"generated":{"line":49,"column":19},"source":"model/gen.js","original":{"line":33,"column":19}},{"name":"io","generated":{"line":49,"column":20},"source":"model/gen.js","original":{"line":33,"column":20}},{"generated":{"line":49,"column":22},"source":"model/gen.js","original":{"line":33,"column":16}},{"name":"fileSystem","generated":{"line":49,"column":23},"source":"model/gen.js","original":{"line":33,"column":23}},{"generated":{"line":49,"column":33},"source":"model/gen.js","original":{"line":33,"column":16}},{"generated":{"line":49,"column":34},"source":"model/gen.js","original":{"line":33,"column":34}},{"generated":{"line":49,"column":65},"source":"model/gen.js","original":{"line":33,"column":16}},{"generated":{"line":49,"column":66},"source":"model/gen.js","original":{"line":33,"column":0}},{"generated":{"line":49,"column":68},"source":"model/gen.js","original":{"line":35,"column":0}},{"generated":{"line":50,"column":0},"source":"model/gen.js","original":{"line":36,"column":0}},{"generated":{"line":51,"column":0},"source":"model/gen.js","original":{"line":37,"column":0}},{"generated":{"line":52,"column":0},"source":"model/gen.js","original":{"line":38,"column":0}},{"generated":{"line":53,"column":0},"source":"model/gen.js","original":{"line":39,"column":0}},{"generated":{"line":54,"column":0},"source":"model/gen.js","original":{"line":40,"column":0}},{"generated":{"line":55,"column":0},"source":"model/gen.js","original":{"line":41,"column":0}},{"generated":{"line":56,"column":0},"source":"model/gen.js","original":{"line":42,"column":0}},{"generated":{"line":57,"column":0},"source":"model/gen.js","original":{"line":43,"column":0}},{"generated":{"line":58,"column":0},"source":"model/gen.js","original":{"line":44,"column":0}},{"generated":{"line":59,"column":0},"source":"model/gen.js","original":{"line":45,"column":0}},{"generated":{"line":60,"column":0},"source":"model/gen.js","original":{"line":46,"column":0}},{"generated":{"line":61,"column":0},"source":"model/gen.js","original":{"line":47,"column":0}},{"generated":{"line":62,"column":0},"source":"model/gen.js","original":{"line":48,"column":0}},{"generated":{"line":63,"column":0},"source":"model/gen.js","original":{"line":49,"column":0}},{"generated":{"line":64,"column":0},"source":"model/gen.js","original":{"line":50,"column":0}},{"generated":{"line":65,"column":0},"source":"model/gen.js","original":{"line":51,"column":0}},{"generated":{"line":66,"column":0},"source":"model/gen.js","original":{"line":52,"column":0}},{"generated":{"line":67,"column":0},"source":"model/gen.js","original":{"line":53,"column":0}},{"generated":{"line":68,"column":0},"source":"model/gen.js","original":{"line":54,"column":0}},{"generated":{"line":69,"column":0},"source":"model/gen.js","original":{"line":55,"column":0}},{"generated":{"line":70,"column":0},"source":"model/gen.js","original":{"line":56,"column":0}},{"generated":{"line":71,"column":0},"source":"model/gen.js","original":{"line":57,"column":0}},{"generated":{"line":72,"column":0},"source":"model/gen.js","original":{"line":58,"column":0}},{"generated":{"line":73,"column":0},"source":"model/gen.js","original":{"line":59,"column":0}},{"generated":{"line":74,"column":0},"source":"model/gen.js","original":{"line":60,"column":0}},{"generated":{"line":75,"column":0},"source":"model/gen.js","original":{"line":61,"column":0}},{"generated":{"line":76,"column":0},"source":"model/gen.js","original":{"line":62,"column":0}},{"generated":{"line":77,"column":0},"source":"model/gen.js","original":{"line":63,"column":0}},{"generated":{"line":78,"column":0},"source":"model/gen.js","original":{"line":64,"column":0}},{"generated":{"line":79,"column":0},"source":"model/gen.js","original":{"line":65,"column":0}},{"generated":{"line":80,"column":0},"source":"model/gen.js","original":{"line":66,"column":0}},{"generated":{"line":81,"column":0},"source":"model/gen.js","original":{"line":67,"column":0}},{"generated":{"line":82,"column":0},"source":"model/gen.js","original":{"line":68,"column":0}},{"generated":{"line":83,"column":0},"source":"model/gen.js","original":{"line":69,"column":0}},{"generated":{"line":84,"column":0},"source":"model/gen.js","original":{"line":70,"column":0}},{"generated":{"line":85,"column":0},"source":"model/gen.js","original":{"line":71,"column":0}},{"generated":{"line":87,"column":0},"source":"model/gen.js","original":{"line":73,"column":7}},{"name":"gen","generated":{"line":87,"column":15},"source":"model/gen.js","original":{"line":73,"column":22}},{"generated":{"line":87,"column":18},"source":"model/gen.js","original":{"line":73,"column":7}},{"generated":{"line":87,"column":21},"source":"model/gen.js","original":{"line":73,"column":28}},{"generated":{"line":88,"column":0},"source":"model/gen.js","original":{"line":75,"column":4}},{"name":"result","generated":{"line":88,"column":6},"source":"model/gen.js","original":{"line":75,"column":8}},{"generated":{"line":88,"column":12},"source":"model/gen.js","original":{"line":75,"column":14}},{"generated":{"line":88,"column":15},"source":"model/gen.js","original":{"line":75,"column":17}},{"generated":{"line":88,"column":17},"source":"model/gen.js","original":{"line":75,"column":4}},{"generated":{"line":90,"column":0},"source":"model/gen.js","original":{"line":77,"column":4}},{"generated":{"line":90,"column":3},"source":"model/gen.js","original":{"line":77,"column":5}},{"generated":{"line":90,"column":15},"source":"model/gen.js","original":{"line":77,"column":17}},{"generated":{"line":91,"column":0},"source":"model/gen.js","original":{"line":78,"column":0}},{"generated":{"line":92,"column":0},"source":"model/gen.js","original":{"line":80,"column":0}},{"generated":{"line":93,"column":0},"source":"model/gen.js","original":{"line":81,"column":0}},{"generated":{"line":94,"column":0},"source":"model/gen.js","original":{"line":82,"column":0}},{"generated":{"line":95,"column":0},"source":"model/gen.js","original":{"line":83,"column":0}},{"generated":{"line":96,"column":0},"source":"model/gen.js","original":{"line":84,"column":4}},{"name":"require","generated":{"line":97,"column":0},"source":"model/gen.js","original":{"line":85,"column":4}},{"name":"require","generated":{"line":97,"column":4},"source":"model/gen.js","original":{"line":85,"column":4}},{"generated":{"line":97,"column":11},"source":"model/gen.js","original":{"line":85,"column":11}},{"generated":{"line":97,"column":12},"source":"model/gen.js","original":{"line":85,"column":12}},{"generated":{"line":97,"column":35},"source":"model/gen.js","original":{"line":85,"column":11}},{"generated":{"line":97,"column":36},"source":"model/gen.js","original":{"line":85,"column":4}},{"generated":{"line":97,"column":37},"source":"model/gen.js","original":{"line":77,"column":17}},{"generated":{"line":97,"column":38},"source":"model/gen.js","original":{"line":86,"column":0}},{"generated":{"line":98,"column":0},"source":"model/gen.js","original":{"line":88,"column":6}},{"generated":{"line":99,"column":0},"source":"model/gen.js","original":{"line":89,"column":2}},{"generated":{"line":102,"column":0},"source":"model/gen.js","original":{"line":90,"column":2}},{"name":"model","generated":{"line":102,"column":10},"source":"model/gen.js","original":{"line":90,"column":8}},{"generated":{"line":102,"column":15},"source":"model/gen.js","original":{"line":90,"column":13}},{"generated":{"line":102,"column":18},"source":"model/gen.js","original":{"line":90,"column":16}},{"name":"tf","generated":{"line":102,"column":24},"source":"model/gen.js","original":{"line":90,"column":22}},{"generated":{"line":102,"column":26},"source":"model/gen.js","original":{"line":90,"column":24}},{"name":"loadLayersModel","generated":{"line":102,"column":27},"source":"model/gen.js","original":{"line":90,"column":25}},{"generated":{"line":102,"column":42},"source":"model/gen.js","original":{"line":90,"column":22}},{"name":"handler","generated":{"line":102,"column":43},"source":"model/gen.js","original":{"line":90,"column":41}},{"generated":{"line":102,"column":50},"source":"model/gen.js","original":{"line":90,"column":22}},{"generated":{"line":102,"column":51},"source":"model/gen.js","original":{"line":90,"column":2}},{"generated":{"line":102,"column":52},"source":"model/gen.js","original":{"line":77,"column":17}},{"generated":{"line":102,"column":53},"source":"model/gen.js","original":{"line":92,"column":2}},{"generated":{"line":104,"column":0},"source":"model/gen.js","original":{"line":94,"column":2}},{"name":"sampleLen","generated":{"line":104,"column":10},"source":"model/gen.js","original":{"line":94,"column":8}},{"generated":{"line":104,"column":19},"source":"model/gen.js","original":{"line":94,"column":17}},{"name":"model","generated":{"line":104,"column":22},"source":"model/gen.js","original":{"line":94,"column":20}},{"generated":{"line":104,"column":27},"source":"model/gen.js","original":{"line":94,"column":25}},{"name":"inputs","generated":{"line":104,"column":28},"source":"model/gen.js","original":{"line":94,"column":26}},{"generated":{"line":104,"column":34},"source":"model/gen.js","original":{"line":94,"column":20}},{"generated":{"line":104,"column":35},"source":"model/gen.js","original":{"line":94,"column":33}},{"generated":{"line":104,"column":36},"source":"model/gen.js","original":{"line":94,"column":20}},{"name":"shape","generated":{"line":104,"column":38},"source":"model/gen.js","original":{"line":94,"column":36}},{"generated":{"line":104,"column":43},"source":"model/gen.js","original":{"line":94,"column":20}},{"generated":{"line":104,"column":44},"source":"model/gen.js","original":{"line":94,"column":42}},{"generated":{"line":104,"column":45},"source":"model/gen.js","original":{"line":94,"column":20}},{"generated":{"line":104,"column":46},"source":"model/gen.js","original":{"line":94,"column":2}},{"generated":{"line":104,"column":47},"source":"model/gen.js","original":{"line":77,"column":17}},{"generated":{"line":104,"column":48},"source":"model/gen.js","original":{"line":96,"column":2}},{"generated":{"line":105,"column":0},"source":"model/gen.js","original":{"line":97,"column":0}},{"generated":{"line":107,"column":0},"source":"model/gen.js","original":{"line":98,"column":2}},{"name":"textDataURL","generated":{"line":107,"column":10},"source":"model/gen.js","original":{"line":98,"column":8}},{"generated":{"line":107,"column":21},"source":"model/gen.js","original":{"line":98,"column":19}},{"name":"path","generated":{"line":107,"column":24},"source":"model/gen.js","original":{"line":98,"column":22}},{"generated":{"line":107,"column":28},"source":"model/gen.js","original":{"line":98,"column":26}},{"name":"resolve","generated":{"line":107,"column":29},"source":"model/gen.js","original":{"line":98,"column":27}},{"generated":{"line":107,"column":36},"source":"model/gen.js","original":{"line":98,"column":22}},{"name":"__dirname","generated":{"line":107,"column":37},"source":"model/gen.js","original":{"line":98,"column":35}},{"generated":{"line":107,"column":46},"source":"model/gen.js","original":{"line":98,"column":22}},{"generated":{"line":107,"column":48},"source":"model/gen.js","original":{"line":98,"column":46}},{"generated":{"line":107,"column":52},"source":"model/gen.js","original":{"line":98,"column":22}},{"generated":{"line":107,"column":54},"source":"model/gen.js","original":{"line":98,"column":52}},{"generated":{"line":107,"column":60},"source":"model/gen.js","original":{"line":98,"column":22}},{"generated":{"line":107,"column":62},"source":"model/gen.js","original":{"line":98,"column":60}},{"generated":{"line":107,"column":71},"source":"model/gen.js","original":{"line":98,"column":22}},{"generated":{"line":107,"column":73},"source":"model/gen.js","original":{"line":98,"column":71}},{"generated":{"line":107,"column":85},"source":"model/gen.js","original":{"line":98,"column":22}},{"generated":{"line":107,"column":86},"source":"model/gen.js","original":{"line":98,"column":2}},{"generated":{"line":107,"column":87},"source":"model/gen.js","original":{"line":77,"column":17}},{"generated":{"line":107,"column":88},"source":"model/gen.js","original":{"line":99,"column":0}},{"generated":{"line":108,"column":0},"source":"model/gen.js","original":{"line":100,"column":0}},{"generated":{"line":110,"column":0},"source":"model/gen.js","original":{"line":101,"column":2}},{"name":"text","generated":{"line":110,"column":10},"source":"model/gen.js","original":{"line":101,"column":8}},{"generated":{"line":110,"column":14},"source":"model/gen.js","original":{"line":101,"column":12}},{"name":"fs","generated":{"line":110,"column":17},"source":"model/gen.js","original":{"line":101,"column":15}},{"generated":{"line":110,"column":19},"source":"model/gen.js","original":{"line":101,"column":17}},{"name":"readFileSync","generated":{"line":110,"column":20},"source":"model/gen.js","original":{"line":101,"column":18}},{"generated":{"line":110,"column":32},"source":"model/gen.js","original":{"line":101,"column":15}},{"name":"textDataURL","generated":{"line":110,"column":33},"source":"model/gen.js","original":{"line":101,"column":31}},{"generated":{"line":110,"column":44},"source":"model/gen.js","original":{"line":101,"column":15}},{"generated":{"line":110,"column":46},"source":"model/gen.js","original":{"line":101,"column":44}},{"name":"encoding","generated":{"line":111,"column":0},"source":"model/gen.js","original":{"line":101,"column":45}},{"name":"encoding","generated":{"line":111,"column":6},"source":"model/gen.js","original":{"line":101,"column":45}},{"generated":{"line":111,"column":14},"source":"model/gen.js","original":{"line":101,"column":53}},{"generated":{"line":111,"column":16},"source":"model/gen.js","original":{"line":101,"column":55}},{"generated":{"line":112,"column":0},"source":"model/gen.js","original":{"line":101,"column":44}},{"generated":{"line":112,"column":5},"source":"model/gen.js","original":{"line":101,"column":15}},{"generated":{"line":112,"column":6},"source":"model/gen.js","original":{"line":101,"column":2}},{"generated":{"line":113,"column":0},"source":"model/gen.js","original":{"line":102,"column":2}},{"name":"textData","generated":{"line":113,"column":10},"source":"model/gen.js","original":{"line":102,"column":8}},{"generated":{"line":113,"column":18},"source":"model/gen.js","original":{"line":102,"column":16}},{"generated":{"line":113,"column":21},"source":"model/gen.js","original":{"line":102,"column":19}},{"name":"TextData","generated":{"line":113,"column":25},"source":"model/gen.js","original":{"line":102,"column":23}},{"generated":{"line":113,"column":39},"source":"model/gen.js","original":{"line":102,"column":19}},{"generated":{"line":113,"column":40},"source":"model/gen.js","original":{"line":102,"column":32}},{"generated":{"line":113,"column":51},"source":"model/gen.js","original":{"line":102,"column":19}},{"name":"text","generated":{"line":113,"column":53},"source":"model/gen.js","original":{"line":102,"column":45}},{"generated":{"line":113,"column":57},"source":"model/gen.js","original":{"line":102,"column":19}},{"name":"sampleLen","generated":{"line":113,"column":59},"source":"model/gen.js","original":{"line":102,"column":51}},{"generated":{"line":113,"column":68},"source":"model/gen.js","original":{"line":102,"column":19}},{"generated":{"line":113,"column":70},"source":"model/gen.js","original":{"line":102,"column":62}},{"generated":{"line":113,"column":71},"source":"model/gen.js","original":{"line":102,"column":19}},{"generated":{"line":113,"column":72},"source":"model/gen.js","original":{"line":102,"column":2}},{"generated":{"line":113,"column":73},"source":"model/gen.js","original":{"line":77,"column":17}},{"generated":{"line":113,"column":74},"source":"model/gen.js","original":{"line":104,"column":2}},{"generated":{"line":115,"column":0},"source":"model/gen.js","original":{"line":105,"column":2}},{"generated":{"line":115,"column":10},"source":"model/gen.js","original":{"line":105,"column":8}},{"name":"seed","generated":{"line":115,"column":11},"source":"model/gen.js","original":{"line":105,"column":9}},{"generated":{"line":115,"column":15},"source":"model/gen.js","original":{"line":105,"column":8}},{"name":"seedIndices","generated":{"line":115,"column":17},"source":"model/gen.js","original":{"line":105,"column":15}},{"generated":{"line":115,"column":28},"source":"model/gen.js","original":{"line":105,"column":8}},{"name":"textData","generated":{"line":115,"column":32},"source":"model/gen.js","original":{"line":105,"column":30}},{"generated":{"line":115,"column":40},"source":"model/gen.js","original":{"line":105,"column":38}},{"name":"getRandomSlice","generated":{"line":115,"column":41},"source":"model/gen.js","original":{"line":105,"column":39}},{"generated":{"line":115,"column":55},"source":"model/gen.js","original":{"line":105,"column":30}},{"generated":{"line":115,"column":57},"source":"model/gen.js","original":{"line":105,"column":2}},{"name":"console","generated":{"line":116,"column":0},"source":"model/gen.js","original":{"line":106,"column":2}},{"name":"console","generated":{"line":116,"column":4},"source":"model/gen.js","original":{"line":106,"column":2}},{"generated":{"line":116,"column":11},"source":"model/gen.js","original":{"line":106,"column":9}},{"name":"log","generated":{"line":116,"column":12},"source":"model/gen.js","original":{"line":106,"column":10}},{"generated":{"line":116,"column":15},"source":"model/gen.js","original":{"line":106,"column":2}},{"generated":{"line":116,"column":16},"source":"model/gen.js","original":{"line":106,"column":14}},{"generated":{"line":116,"column":32},"source":"model/gen.js","original":{"line":106,"column":2}},{"name":"seedIndices","generated":{"line":116,"column":34},"source":"model/gen.js","original":{"line":106,"column":32}},{"generated":{"line":116,"column":45},"source":"model/gen.js","original":{"line":106,"column":2}},{"name":"console","generated":{"line":117,"column":0},"source":"model/gen.js","original":{"line":107,"column":2}},{"name":"console","generated":{"line":117,"column":4},"source":"model/gen.js","original":{"line":107,"column":2}},{"generated":{"line":117,"column":11},"source":"model/gen.js","original":{"line":107,"column":9}},{"name":"log","generated":{"line":117,"column":12},"source":"model/gen.js","original":{"line":107,"column":10}},{"generated":{"line":117,"column":15},"source":"model/gen.js","original":{"line":107,"column":2}},{"generated":{"line":117,"column":16},"source":"model/gen.js","original":{"line":107,"column":14}},{"generated":{"line":117,"column":24},"source":"model/gen.js","original":{"line":107,"column":2}},{"name":"seed","generated":{"line":117,"column":26},"source":"model/gen.js","original":{"line":107,"column":24}},{"generated":{"line":117,"column":30},"source":"model/gen.js","original":{"line":107,"column":2}},{"generated":{"line":117,"column":32},"source":"model/gen.js","original":{"line":77,"column":17}},{"generated":{"line":117,"column":33},"source":"model/gen.js","original":{"line":109,"column":0}},{"generated":{"line":119,"column":0},"source":"model/gen.js","original":{"line":111,"column":2}},{"name":"generated","generated":{"line":119,"column":10},"source":"model/gen.js","original":{"line":111,"column":8}},{"generated":{"line":119,"column":19},"source":"model/gen.js","original":{"line":111,"column":17}},{"generated":{"line":119,"column":22},"source":"model/gen.js","original":{"line":111,"column":20}},{"generated":{"line":119,"column":28},"source":"model/gen.js","original":{"line":111,"column":26}},{"name":"model","generated":{"line":119,"column":53},"source":"model/gen.js","original":{"line":112,"column":6}},{"generated":{"line":119,"column":58},"source":"model/gen.js","original":{"line":111,"column":26}},{"name":"textData","generated":{"line":119,"column":60},"source":"model/gen.js","original":{"line":112,"column":13}},{"generated":{"line":119,"column":68},"source":"model/gen.js","original":{"line":111,"column":26}},{"name":"seedIndices","generated":{"line":119,"column":70},"source":"model/gen.js","original":{"line":112,"column":23}},{"generated":{"line":119,"column":81},"source":"model/gen.js","original":{"line":111,"column":26}},{"generated":{"line":119,"column":83},"source":"model/gen.js","original":{"line":112,"column":36}},{"generated":{"line":119,"column":86},"source":"model/gen.js","original":{"line":111,"column":26}},{"generated":{"line":119,"column":88},"source":"model/gen.js","original":{"line":112,"column":41}},{"generated":{"line":119,"column":92},"source":"model/gen.js","original":{"line":111,"column":26}},{"generated":{"line":119,"column":93},"source":"model/gen.js","original":{"line":111,"column":2}},{"name":"console","generated":{"line":120,"column":0},"source":"model/gen.js","original":{"line":114,"column":2}},{"name":"console","generated":{"line":120,"column":4},"source":"model/gen.js","original":{"line":114,"column":2}},{"generated":{"line":120,"column":11},"source":"model/gen.js","original":{"line":114,"column":9}},{"name":"log","generated":{"line":120,"column":12},"source":"model/gen.js","original":{"line":114,"column":10}},{"generated":{"line":120,"column":15},"source":"model/gen.js","original":{"line":114,"column":2}},{"name":"generated","generated":{"line":120,"column":16},"source":"model/gen.js","original":{"line":114,"column":14}},{"generated":{"line":120,"column":25},"source":"model/gen.js","original":{"line":114,"column":2}},{"generated":{"line":121,"column":0},"source":"model/gen.js","original":{"line":115,"column":2}},{"name":"generated","generated":{"line":121,"column":11},"source":"model/gen.js","original":{"line":115,"column":9}},{"generated":{"line":121,"column":20},"source":"model/gen.js","original":{"line":115,"column":2}},{"generated":{"line":122,"column":0},"source":"model/gen.js","original":{"line":117,"column":3}},{"generated":{"line":122,"column":3},"source":"model/gen.js","original":{"line":77,"column":4}},{"generated":{"line":123,"column":0},"source":"model/gen.js","original":{"line":118,"column":1}},{"name":"gen","generated":{"line":125,"column":0},"source":"model/gen.js","original":{"line":119,"column":0}},{"generated":{"line":125,"column":3},"source":"model/gen.js","original":{"line":119,"column":3}}],"sources":{"model/gen.js":"/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\n/**\n * Use a trained next-character prediction model to generate some text.\n */\n\nimport * as fs from 'fs';\nimport * as os from 'os';\nimport * as path from 'path';\nimport * as argparse from 'argparse';\n\nimport * as tf from '@tensorflow/tfjs';\nimport * as tfn from '@tensorflow/tfjs-node';\n\nimport { TextData } from './data';\nimport { generateText } from './model';\n\nconst handler = tfn.io.fileSystem(\"./model/brooklynjs/model.json\");\n\n// function parseArgs() {\n//   const parser = argparse.ArgumentParser({\n//     description: 'Train an lstm-text-generation model.'\n//   });\n// //   parser.addArgument('textDatasetName', {\n// //     type: 'string',\n// //     choices: Object.keys(TEXT_DATA_URLS),\n// //     help: 'Name of the text dataset'\n// //   });\n//   parser.addArgument('modelJSONPath', {\n//     type: 'string',\n//     help: 'Path to the trained next-char prediction model saved on disk ' +\n//     '(e.g., ./my-model/model.json)'\n//   });\n//   parser.addArgument('--genLength', {\n//     type: 'int',\n//     defaultValue: 200,\n//     help: 'Length of the text to generate.'\n//   });\n//   parser.addArgument('--temperature', {\n//     type: 'float',\n//     defaultValue: 0.5,\n//     help: 'Temperature value to use for text generation. Higher values ' +\n//     'lead to more random-looking generation results.'\n//   });\n//   parser.addArgument('--gpu', {\n//     action: 'storeTrue',\n//     help: 'Use CUDA GPU for training.'\n//   });\n//   parser.addArgument('--sampleStep', {\n//     type: 'int',\n//     defaultValue: 3,\n//     help: 'Step length: how many characters to skip between one example ' +\n//     'extracted from the text data to the next.'\n//   });\n//   return parser.parseArgs();\n// }\n\nexport async function gen() {\n\n    let result = '';\n\n    (async () => {\n//   const args = parseArgs();\n\n//   if (args.gpu) {\n//     console.log('Using GPU');\n//     require('@tensorflow/tfjs-node-gpu');\n//   } else {\n    // console.log('Using CPU');\n    require('@tensorflow/tfjs-node');\n//   }\n\n      // console.log('model:');\n  // Load the model.\n  const model = await tf.loadLayersModel(handler);\n\n  // console.log(model);\n\n  const sampleLen = model.inputs[0].shape[1];\n\n  // Create the text data object.\n//   const textDataURL = TEXT_DATA_URLS[args.textDatasetName].url;\n  const textDataURL = path.resolve(__dirname, '..', 'text', 'results', 'corpus.txt');\n//   const localTextDataPath = path.join(os.tmpdir(), path.basename(textDataURL));\n//   await maybeDownload(textDataURL, localTextDataPath);\n  const text = fs.readFileSync(textDataURL, {encoding: 'utf-8'});\n  const textData = new TextData('text-data', text, sampleLen, 3);\n\n  // Get a seed text from the text data object.\n  const [seed, seedIndices] = textData.getRandomSlice();\n  console.log('seed indices: ', seedIndices);\n  console.log('seed: ', seed);\n\n//   console.log(`Seed text:\\n\"${seed}\"\\n`);\n\n  const generated = await generateText(\n      model, textData, seedIndices, 600, 0.35);\n\n  console.log(generated);\n  return generated;\n  \n  })();\n}\ngen();\n"},"lineCount":null}},"error":null,"hash":"d65a7785516734605333486b4a42b4de","cacheData":{"env":{}}}